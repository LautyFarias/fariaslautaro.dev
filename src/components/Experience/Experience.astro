---
import Section from "@/components/ui/Section.astro"

import ExperienceGroup from "./_ExperienceGroup.astro"
import ExperienceItem from "./_ExperienceItem.astro"
import ExperienceSeparator from "./_ExperienceSeparator.astro"

interface Position {
  name: string
  description: string
  dateRange: string
}

interface Experience {
  company: string
  yearRange: string
  positions: Position[]
}

interface Props {
  experience: Experience[]
}

const { experience } = Astro.props
---

<Section title="Experiencia">
  {
    experience.map(({ company, yearRange, positions }, index) => (
      <>
        {index > 0 && <ExperienceSeparator class="h-10" />}
        <ExperienceGroup company={company} yearRange={yearRange}>
          {positions.map(({ name, description, dateRange }) => (
            <ExperienceItem
              position={name}
              description={description}
              dateRange={dateRange}
            />
          ))}
        </ExperienceGroup>
      </>
    ))
  }
</Section>
